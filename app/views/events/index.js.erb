function draw_graph(chart_div, title, graph_data)
{
   return new Highcharts.Chart({
      chart: {
        renderTo: chart_div
      },
      title: {
        text: title
      },
      series: [
        {
          type: "pie",
          name: "Aggregate Events",
          data: graph_data
        }
      ]
    });
}
	
function draw_gauge(chart_div, title, graph_data)
{
   return new Highcharts.Chart({
      chart: {
        renderTo: chart_div
      },
      title: {
        text: title
      },
	  yAxis: {
		min: 0,
		max: (graph_data + .2 * graph_data),
		minorTickInterval: 'auto',
		minorTickWidth:1,
		minorTickLength: 10,
		minorTickPosition: 'inside',
		tickPixelInterval: 'auto',
		tickWidth: 2,
		tickPosition: 'inside',
		tickLength: 10,
		tickColor: '#555',
		labels: {
			step: 2,
			rotation: 'auto'
		}
	},
      series: [
        {
          type: "gauge",
          name: "Logging Rate",
          data: [graph_data]
        }
      ]
    });
}

draw_graph("systems_chart","Aggregate Events by System",<%=raw system_stats %>);
draw_graph("services_chart","Aggregate Events by Service",<%=raw service_stats %>);
draw_gauge("30_days_chart", "30 Days", <%=raw total_events_since(30.days.ago) %>);
draw_gauge("7_days_chart", "7 Days", <%=raw total_events_since(7.days.ago) %>);
draw_gauge("1_day_chart", "24 Hours", <%=raw total_events_since(24.hours.ago) %>);
	